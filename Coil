--Converted with ttyyuu12345's model to script plugin v4
function sandbox(var, func)
	local env = getfenv(func)
	local newenv = setmetatable({}, {
		__index = function(self, k)
			if k == "script" then
				return var
			else
				return env[k]
			end
		end,
	})
	setfenv(func, newenv)
	return func
end

cors = {}
mas = Instance.new("Model", game:GetService("Lighting"))
Tool0 = Instance.new("Tool")
Script1 = Instance.new("Script")
Part2 = Instance.new("Part")
SpecialMesh3 = Instance.new("SpecialMesh")
Sound4 = Instance.new("Sound")

Tool0.Name = "SpeedCoil"
Tool0.Parent = mas
Tool0.TextureId = "rbxassetid://99170415"
Tool0.Grip = CFrame.new(0, 0, -0.8)
Tool0.GripPos = Vector3.new(0, 0, -0.8)
Tool0.ToolTip = "Speed Up!"

Script1.Name = "SpeedScript"
Script1.Parent = Tool0

table.insert(cors, sandbox(Script1, function()
	-- Rescripted by samtheblender
	local Services = {
		Players = game:GetService("Players"),
		TweenService = game:GetService("TweenService"),
		Debris = game:GetService("Debris"),
		RunService = game:GetService("RunService")
	}

	local Properties = {
		SpeedBoost = 35,
		SpeedForSmoke = 30
	}

	local Tool = script.Parent
	local Handle = Tool:WaitForChild("Handle")
	local Character, Player, Humanoid, Root, LastSpeed, SmokeConnection, SmokeEffect

	local function CheckIfAlive()
		return Character and Character.Parent and Humanoid and Humanoid.Health > 0 and Player and Player.Parent
	end

	local function ClearEffect()
		if SmokeEffect then
			SmokeEffect.Enabled = false
			Services.Debris:AddItem(SmokeEffect, 5)
			SmokeEffect = nil
		end
	end

	Tool.Equipped:Connect(function()
		Character = Tool.Parent
		Player = Services.Players:GetPlayerFromCharacter(Character)
		Humanoid = Character:FindFirstChildOfClass("Humanoid")
		Root = Character:FindFirstChild("HumanoidRootPart")
		Services.RunService.Heartbeat:Wait()

		if not Tool:IsDescendantOf(workspace) or not CheckIfAlive() or LastSpeed then
			return
		end

		LastSpeed = Humanoid.WalkSpeed
		Humanoid.WalkSpeed = Humanoid.WalkSpeed + Properties.SpeedBoost
		Handle:WaitForChild("Equip"):Play()

		SmokeConnection = Humanoid.Running:Connect(function(Speed)
			if Speed >= Properties.SpeedForSmoke then
				if not SmokeEffect then
					SmokeEffect = Instance.new("Smoke")
					SmokeEffect.Parent = Root
				end
			else
				ClearEffect()
			end
		end)
	end)

	Tool.Unequipped:Connect(function()
		if SmokeConnection then
			SmokeConnection:Disconnect()
			SmokeConnection = nil
		end
		ClearEffect()

		if not LastSpeed or not CheckIfAlive() then
			return
		end

		Humanoid.WalkSpeed = LastSpeed
		LastSpeed = nil
	end)
end))

Part2.Name = "Handle"
Part2.Parent = Tool0
Part2.CFrame = CFrame.new(-3, 0.5, 6)
Part2.Size = Vector3.new(1, 1, 2)
Part2.BottomSurface = Enum.SurfaceType.Smooth
Part2.TopSurface = Enum.SurfaceType.Smooth

SpecialMesh3.Parent = Part2
SpecialMesh3.MeshId = "rbxassetid://16606212"
SpecialMesh3.Scale = Vector3.new(0.7, 0.7, 0.7)
SpecialMesh3.TextureId = "rbxassetid://99170547"
SpecialMesh3.MeshType = Enum.MeshType.FileMesh

Sound4.Name = "Equip"
Sound4.Parent = Part2
Sound4.SoundId = "rbxassetid://99173388"
Sound4.Volume = 1

-- Masukkan Tool ke StarterGear dan Backpack agar tetap ada setelah mati
local player = game.Players.LocalPlayer
Tool0.Parent = player.Backpack
Tool0:Clone().Parent = player.StarterGear  -- Inilah kuncinya

-- Jalankan semua script sandbox
for i, v in pairs(cors) do
	spawn(function()
		pcall(v)
	end)
end

mas:Destroy()
